(function(){"use strict";var t={5842:function(t,e,r){var a=r(5471),s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},i=[],o={name:"App",components:{}},l=o,n=r(1656),u=(0,n.A)(l,s,i,!1,null,null,null),c=u.exports,p=r(1052),d=r.n(p),m=r(173),f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-container"},[e("el-card",{staticClass:"login-card"},[e("h2",{staticClass:"login-title"},[t._v("用户登录")]),e("el-form",{ref:"ruleForm",staticClass:"login-form",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-position":"top"}},[e("el-form-item",{attrs:{label:"账号",prop:"uname"}},[e("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"请输入账号"},model:{value:t.ruleForm.uname,callback:function(e){t.$set(t.ruleForm,"uname",e)},expression:"ruleForm.uname"}})],1),e("el-form-item",{attrs:{label:"密码",prop:"password"}},[e("el-input",{attrs:{type:"password","prefix-icon":"el-icon-lock",autocomplete:"off",placeholder:"请输入密码","show-password":""},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1)],1),e("div",{staticClass:"btn-group"},[e("el-button",{staticClass:"login-btn",attrs:{type:"primary",loading:t.loading},on:{click:function(e){return t.submitForm("ruleForm")}}},[t.loading?e("i",{staticClass:"el-icon-loading"}):e("span",[t._v("立即登录")])]),e("div",{staticClass:"action-links"},[e("el-link",{attrs:{type:"primary"},on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("忘记密码？")]),e("router-link",{attrs:{to:"/register"}},[e("el-link",{attrs:{type:"primary"}},[t._v("立即注册")])],1)],1)],1)],1),t._m(0)],1)},h=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer-text"},[e("span",[t._v("© 2025 版权所有 · 保留所有权利")])])}],g=(r(4114),{data(){return{ruleForm:{uname:"",password:""},rules:{uname:[{required:!0,message:"用户名不能为空！",trigger:"blur"}],password:[{required:!0,message:"密码不能为空！",trigger:"blur"}]},loading:!1}},methods:{submitForm(t){this.$refs[t].validate((t=>{if(this.loading=!0,!t)return console.log("error submit!!"),this.loading=!1,!1;{let t=this;this.axios({url:"/api/user/login",method:"post",headers:{"Content-Type":"application/json"},params:{uname:t.ruleForm.uname,password:t.ruleForm.password}}).then((e=>{"0"===e.data.code?(sessionStorage.setItem("userInfo",JSON.stringify(e.data.data)),this.$router.push("/Home"),this.$message({message:e.data.msg,type:"success"})):this.$message({message:e.data.msg,type:"warning"}),t.loading=!1,console.log(e)}))}}))},resetForm(t){this.$refs[t].resetFields()}}}),b=g,y=(0,n.A)(b,f,h,!1,null,"f76c0866",null),v=y.exports,k=function(){var t=this,e=t._self._c;return e("div",[e("el-card",{staticClass:"box-card"},[e("h2",[t._v("注册")]),e("el-form",{ref:"ruleForm",staticClass:"register-from",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-position":"left","label-width":"80px"}},[e("el-form-item",{attrs:{label:"账号",prop:"uname"}},[e("el-input",{model:{value:t.ruleForm.uname,callback:function(e){t.$set(t.ruleForm,"uname",e)},expression:"ruleForm.uname"}})],1),e("el-form-item",{attrs:{label:"密码",prop:"pass"}},[e("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.ruleForm.pass,callback:function(e){t.$set(t.ruleForm,"pass",e)},expression:"ruleForm.pass"}})],1),e("el-form-item",{attrs:{label:"确认密码",prop:"password"}},[e("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1)],1),e("div",{staticClass:"btnGroup"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提交")]),e("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")]),e("el-button",{on:{click:t.goback}},[t._v("返回")])],1)],1)],1)},w=[],x={data(){var t=(t,e,r)=>{""===e?r(new Error("请输入密码")):(""!==this.ruleForm.checkPass&&this.$refs.ruleForm.validateField("checkPass"),r())},e=(t,e,r)=>{""===e?r(new Error("请再次输入密码")):e!==this.ruleForm.pass?r(new Error("两次输入密码不一致！")):r()};return{ruleForm:{uname:"",pass:"",password:""},rules:{uname:[{required:!0,message:"账号不能为空!",trigger:"blur"}],pass:[{required:!0,validator:t,trigger:"blur"}],password:[{required:!0,validator:e,trigger:"blur"}]}}},methods:{submitForm(t){this.$refs[t].validate((t=>{if(this.loading=!0,!t)return console.log("error submit!"),this.loading=!1,!1;{let t=this;this.axios({url:"/api/user/register",method:"post",headers:{"Content-Type":"application/json"},data:{uname:this.ruleForm.uname,password:t.ruleForm.password}}).then((e=>{"0"===e.data.code?this.$message({message:e.data.message,type:"success"}):this.$message({message:e.data.message,type:"warning"}),t.loading=!1,console.log(e)}))}}))},resetForm(t){this.$refs[t].resetFields()},goback(){this.$router.go(-1)}}},F=x,_=(0,n.A)(F,k,w,!1,null,"762d34cb",null),C=_.exports,$=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[t._m(0),e("div",{staticClass:"app-container"},[e("div",{staticClass:"box"},[e("div",{staticClass:"filter-container"},[e("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"书名"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getAll.apply(null,arguments)}},model:{value:t.filters.title,callback:function(e){t.$set(t.filters,"title",e)},expression:"filters.title"}}),e("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"作者"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getAll.apply(null,arguments)}},model:{value:t.filters.author,callback:function(e){t.$set(t.filters,"author",e)},expression:"filters.author"}}),e("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"类别"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getAll.apply(null,arguments)}},model:{value:t.filters.type,callback:function(e){t.$set(t.filters,"type",e)},expression:"filters.type"}}),e("el-button",{staticClass:"searchBut",on:{click:t.getAll}},[t._v("查询")]),e("el-button",{staticClass:"butT",on:{click:t.resetInput}},[t._v("重置")]),e("el-button",{staticClass:"butT",attrs:{type:"primary",plain:""},on:{click:t.addBook}},[t._v("新建")])],1),e("el-table",{attrs:{size:"small","current-row-key":"id",data:t.dataList,stripe:"","highlight-current-row":""}},[e("el-table-column",{attrs:{type:"index",align:"center",label:"编号"}}),e("el-table-column",{attrs:{prop:"title",label:"书名",align:"center"}}),e("el-table-column",{attrs:{prop:"author",label:"作者",align:"center"}}),e("el-table-column",{attrs:{prop:"type",label:"类型",align:"center"}}),e("el-table-column",{attrs:{prop:"description",label:"描述",align:"center","show-overflow-tooltip":!0}}),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.updateBook(r.row)}}},[t._v(" 编辑 ")]),e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.deleteBook(r.row)}}},[t._v(" 删除 ")])]}}])})],1),e("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"dataForm",attrs:{model:t.formData,rules:t.rules,"label-position":"right","label-width":"100px"}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"书名",prop:"title"}},[e("el-input",{model:{value:t.formData.title,callback:function(e){t.$set(t.formData,"title",e)},expression:"formData.title"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"作者",prop:"author"}},[e("el-input",{model:{value:t.formData.author,callback:function(e){t.$set(t.formData,"author",e)},expression:"formData.author"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"类别",prop:"type"}},[e("el-input",{model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"描述"}},[e("el-input",{attrs:{type:"textarea"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],1)],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.handleCancel}},[t._v("取消")]),e("el-button",{on:{click:t.submitForm}},[t._v("确定")])],1)],1),e("div",{staticClass:"pagination-container"},[e("el-pagination",{attrs:{background:!0,small:!0,"page-sizes":[10,20,50],"current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.totalElements},on:{"current-change":t.pageChange,"size-change":t.sizeChange}})],1)],1)])])},D=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-header"},[e("h1",[t._v("小说管理")])])}],O=(r(8111),r(2489),{data(){return{dataList:[],filters:{title:"",author:"",type:""},pagination:{currentPage:1,pageSize:10,totalElements:0},dialogVisible:!1,isEdit:!1,formData:{id:null,title:"",author:"",type:"",description:""},rules:{title:[{required:!0,message:"书名不能为空",trigger:"blur"}],author:[{required:!0,message:"作者不能为空",trigger:"blur"}],type:[{required:!0,message:"类型不能为空",trigger:"blur"}]}}},computed:{dialogTitle(){return this.isEdit?"编辑小说":"新增小说"}},mounted(){this.getAll()},methods:{async getAll(){try{const t=await this.axios.get("api/user/books",{params:{page:this.pagination.currentPage-1,size:this.pagination.pageSize,title:this.filters.title,sort:"id,asc",author:this.filters.author,type:this.filters.type}});this.dataList=t.data.content,this.pagination.totalElements=t.data.totalElements}catch(t){console.error("加载数据失败:",t)}},pageChange(t){this.pagination.currentPage=t,this.getAll()},sizeChange(t){this.pagination.pageSize=t,this.getAll()},addBook(){this.isEdit=!1,this.formData={title:"",author:"",type:"",description:""},this.dialogVisible=!0},updateBook(t){this.isEdit=!0,this.formData={...t},this.dialogVisible=!0},async deleteBook(t){try{await this.$confirm("此操作将永久删除该小说, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});try{await this.axios.delete(`api/user/books/${t.id}`),this.$message.success("删除成功"),this.dataList=this.dataList.filter((e=>e.id!==t.id))}catch(e){404===e.response?.status?this.$message.error("小说不存在"):this.$message.error("删除失败")}}catch(r){}},submitForm(){this.$refs.dataForm.validate((async t=>{if(t)try{this.loading=!0;const t=this.formData.id?`api/user/books/${this.formData.id}`:"api/user/books",e=this.formData.id?"put":"post";await this.axios[e](t,this.formData),this.$message.success(this.formData.id?"更新成功":"添加成功"),this.dialogVisible=!1,await this.getAll()}catch(e){this.loading=!1,console.error("提交失败:",e)}}))},handleCancel(){this.dialogVisible=!1,this.$nextTick((()=>{this.$refs.dataForm.resetFields(),this.formData={id:null,title:"",author:"",type:"",description:""}}))},resetInput(){this.filters={title:"",author:"",type:""},this.getAll()}}}),A=O,E=(0,n.A)(A,$,D,!1,null,"0b41d21b",null),S=E.exports;const z=new m.Ay({mode:"history",routes:[{path:"/",redirect:"/login"},{path:"/login",component:v},{path:"/register",component:C},{path:"/home",component:S}]});z.beforeEach(((t,e,r)=>{let a=!!sessionStorage.getItem("userInfo");"/login"===t.path||"/register"===t.path||a?r():(r({path:"/login"}),(0,p.Message)({message:"请先登录！",type:"warning"}))}));var T=z,j=r(4335),P=r(1021);a["default"].config.productionTip=!1,a["default"].use(d()),a["default"].use(m.Ay),a["default"].use(P.A,j.A),new a["default"]({render:t=>t(c),router:T}).$mount("#app")}},e={};function r(a){var s=e[a];if(void 0!==s)return s.exports;var i=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=t,function(){r.amdO={}}(),function(){var t=[];r.O=function(e,a,s,i){if(!a){var o=1/0;for(c=0;c<t.length;c++){a=t[c][0],s=t[c][1],i=t[c][2];for(var l=!0,n=0;n<a.length;n++)(!1&i||o>=i)&&Object.keys(r.O).every((function(t){return r.O[t](a[n])}))?a.splice(n--,1):(l=!1,i<o&&(o=i));if(l){t.splice(c--,1);var u=s();void 0!==u&&(e=u)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[a,s,i]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={524:0};r.O.j=function(e){return 0===t[e]};var e=function(e,a){var s,i,o=a[0],l=a[1],n=a[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(s in l)r.o(l,s)&&(r.m[s]=l[s]);if(n)var c=n(r)}for(e&&e(a);u<o.length;u++)i=o[u],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(c)},a=self["webpackChunkvue_login_demo"]=self["webpackChunkvue_login_demo"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=r.O(void 0,[504],(function(){return r(5842)}));a=r.O(a)})();
//# sourceMappingURL=app.4231fa15.js.map